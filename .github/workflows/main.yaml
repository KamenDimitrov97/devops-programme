name: M1-4-2-CI-Practice
run-name: ${{ github.actor }} is testing out GitHub Actions ðŸš€
on:
  push:
      branches:
      - feature/*
jobs:
  M1-4-2-CI-Practice:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4

      - uses: actions/setup-python@v4
        with:
            python-version: '3.10' 
      - run: pip install -r requirements.txt
      - run: python -m unittest discover -s app/ -p '*_test.py'
      
      - uses: actions/setup-node@v4
        with:
          node-version: 18
      - run: npm i -g cli-markdown
      - run: md README.md

      - uses: gitleaks/gitleaks-action@v2
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: SonarCloud Scan
        uses: sonarsource/sonarcloud-github-action@master
        env:
            GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
            SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
        with:
          args: 
            -Dsonar.organization=kamendimitrov97
            -Dsonar.projectKey=KamenDimitrov97_devops-programme
            -Dsonar.verbose=true


      - uses: ricardochaves/python-lint@v1.4.0
        with:
            python-root-list: "app"
            use-pylint: true
            use-pycodestyle: false
            use-flake8: true
            use-black: true
            use-mypy: false
            use-isort: false
            # extra-pylint-options: ""
            # extra-pycodestyle-options: ""
            # extra-flake8-options: ""
            # extra-black-options: ""
            # extra-mypy-options: ""
            # extra-isort-options: ""
        
      - name: Check editorconfig compliance
        uses: editorconfig-checker/action-editorconfig-checker@main
      - run: editorconfig-checker
